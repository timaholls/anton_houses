from django.core.management.base import BaseCommand
from main.models import Tag

class Command(BaseCommand):
    help = 'Обновляет теги с SEO-полями'

    def handle(self, *args, **options):
        # Данные для обновления тегов
        tags_data = {
            'Ипотека': {
                'h1_title': 'Ипотека в Уфе - выгодные условия кредитования',
                'meta_title': 'Ипотека в Уфе 2025 - ставки от 5.5%, одобрение за 1 день',
                'meta_description': 'Ипотечные кредиты в Уфе на выгодных условиях. Низкие ставки, быстрое одобрение, минимальный пакет документов.'
            },
            'Кредиты': {
                'h1_title': 'Кредиты на недвижимость в Уфе',
                'meta_title': 'Кредиты на недвижимость в Уфе - выгодные условия',
                'meta_description': 'Кредиты на покупку недвижимости в Уфе. Выгодные условия, быстрое оформление, минимальные требования.'
            },
            'Доходы и налоги': {
                'h1_title': 'Налоги и доходы при покупке недвижимости',
                'meta_title': 'Налоги при покупке недвижимости - вычеты и льготы',
                'meta_description': 'Налоговые вычеты при покупке недвижимости. Как получить налоговый вычет, документы и сроки.'
            },
            'Ситуация': {
                'h1_title': 'Анализ рынка недвижимости Уфы',
                'meta_title': 'Рынок недвижимости Уфы 2025 - цены и тренды',
                'meta_description': 'Анализ рынка недвижимости Уфы в 2025 году. Динамика цен, популярные районы, прогнозы.'
            },
            'Экономика': {
                'h1_title': 'Экономика и недвижимость Уфы',
                'meta_title': 'Экономика Уфы и рынок недвижимости',
                'meta_description': 'Влияние экономических факторов на рынок недвижимости Уфы. Анализ и прогнозы.'
            },
            'Законы': {
                'h1_title': 'Законы о недвижимости в России',
                'meta_title': 'Законы о недвижимости - изменения 2025',
                'meta_description': 'Актуальные законы о недвижимости в России. Изменения в законодательстве 2025 года.'
            },
            'Инструкции': {
                'h1_title': 'Инструкции по покупке недвижимости',
                'meta_title': 'Как купить недвижимость - пошаговая инструкция',
                'meta_description': 'Пошаговая инструкция по покупке недвижимости. От выбора до оформления документов.'
            },
            'Советы': {
                'h1_title': 'Советы по покупке недвижимости',
                'meta_title': 'Советы экспертов по покупке недвижимости',
                'meta_description': 'Полезные советы от экспертов по покупке недвижимости. Как избежать ошибок и сэкономить.'
            }
        }

        for tag_name, seo_data in tags_data.items():
            try:
                tag = Tag.objects.get(name=tag_name)
                tag.h1_title = seo_data['h1_title']
                tag.meta_title = seo_data['meta_title']
                tag.meta_description = seo_data['meta_description']
                tag.save()
                self.stdout.write(
                    self.style.SUCCESS(f'Обновлен тег: {tag.name}')
                )
            except Tag.DoesNotExist:
                self.stdout.write(
                    self.style.WARNING(f'Тег не найден: {tag_name}')
                )

        self.stdout.write(
            self.style.SUCCESS('Успешно обновлены SEO-поля тегов!')
        ) 