from django.core.management.base import BaseCommand
from django.utils import timezone
from datetime import timedelta
from main.models import Article

class Command(BaseCommand):
    help = 'Создает примеры статей о недвижимости'

    def handle(self, *args, **options):
        articles_data = [
            {
                'title': 'Как купить и продать квартиру в другом городе',
                'excerpt': 'Покупка и продажа квартиры в другом городе может показаться сложной задачей, но с правильным подходом это вполне осуществимо. В этой статье мы расскажем о важных шагах, которые помогут вам успешно провести сделку.',
                'content': '''
                Покупка и продажа квартиры в другом городе может показаться сложной задачей, но с правильным подходом это вполне осуществимо. В этой статье мы расскажем о важных шагах, которые помогут вам успешно провести сделку.

                **Подготовка к продаже:**
                1. Оценка недвижимости - пригласите профессионального оценщика
                2. Подготовка документов - убедитесь, что все документы в порядке
                3. Фотографии и описание - качественные материалы привлекут больше покупателей
                4. Выбор агентства - доверьтесь профессионалам

                **Поиск новой квартиры:**
                1. Изучите рынок недвижимости в целевом городе
                2. Определите бюджет и требования
                3. Используйте онлайн-платформы и агентства
                4. Планируйте поездки для просмотра

                **Правовые аспекты:**
                - Проверка документов на недвижимость
                - Оформление сделки через нотариуса
                - Регистрация прав собственности
                - Налоговые обязательства

                **Финансовое планирование:**
                - Расчет всех расходов на сделку
                - Учет налогов и пошлин
                - Планирование переезда
                - Резервный фонд на непредвиденные расходы
                ''',
                'category': 'mortgage',
                'is_featured': True,
                'published_date': timezone.now().date() - timedelta(days=5)
            },
            {
                'title': 'История появления ипотеки в России',
                'excerpt': 'Ипотека - известный всем способ приобретения недвижимости. Но когда и как она появилась в России? В этой статье мы расскажем о том, как развивалась ипотека в нашей стране.',
                'content': '''
                Ипотека - известный всем способ приобретения недвижимости. Но когда и как она появилась в России? В этой статье мы расскажем о том, как развивалась ипотека в нашей стране.

                **Дореволюционный период:**
                Первые ипотечные банки появились в России в XIX веке. В 1859 году был создан Государственный банк, который начал выдавать ипотечные кредиты. К 1917 году в стране действовало более 40 ипотечных банков.

                **Советский период:**
                После революции ипотечное кредитование было практически прекращено. Государство предоставляло жилье бесплатно, но с длинными очередями и ограниченным выбором.

                **Современный период:**
                Возрождение ипотеки началось в 1990-х годах. В 1998 году был принят закон "Об ипотеке", который заложил правовую основу для ипотечного кредитования.

                **Развитие рынка:**
                - 2000-е годы - бурный рост ипотечного рынка
                - 2008-2009 - кризис и падение объемов кредитования
                - 2010-е годы - восстановление и стабилизация
                - 2020-е годы - цифровизация и новые продукты

                **Современные тенденции:**
                - Снижение ставок по ипотеке
                - Упрощение процедуры получения кредита
                - Развитие льготных программ
                - Цифровые технологии в ипотеке
                ''',
                'category': 'mortgage',
                'is_featured': True,
                'published_date': timezone.now().date() - timedelta(days=10)
            },
            {
                'title': 'В каком возрасте стоит покупать квартиру',
                'excerpt': 'Покупка своей квартиры - важный шаг в жизни каждого человека. Но когда именно логичнее всего заняться приобретением? В статье мы порассуждаем, в каком возрасте лучше покупать недвижимость.',
                'content': '''
                Покупка своей квартиры - важный шаг в жизни каждого человека. Но когда именно логичнее всего заняться приобретением? В статье мы порассуждаем, в каком возрасте лучше покупать недвижимость.

                **20-25 лет:**
                Преимущества:
                - Много времени для погашения кредита
                - Меньше обязательств
                - Возможность инвестировать в будущее

                Недостатки:
                - Нестабильный доход
                - Отсутствие первоначального взноса
                - Неопределенность в карьере

                **25-30 лет:**
                Преимущества:
                - Стабильный доход
                - Накопления для первоначального взноса
                - Четкие планы на будущее

                Недостатки:
                - Семейные обязательства
                - Высокие расходы на детей
                - Необходимость в большей площади

                **30-40 лет:**
                Преимущества:
                - Максимальный доход
                - Большие накопления
                - Опыт в финансовом планировании

                Недостатки:
                - Меньше времени до пенсии
                - Высокие обязательства
                - Риски для здоровья

                **После 40 лет:**
                Преимущества:
                - Финансовая стабильность
                - Возможность покупки без кредита
                - Четкие приоритеты

                Недостатки:
                - Меньше времени для инвестиций
                - Высокие ставки по кредитам
                - Риски потери дохода

                **Рекомендации:**
                1. Оцените свою финансовую ситуацию
                2. Рассчитайте все расходы
                3. Планируйте на долгосрочную перспективу
                4. Учитывайте семейные планы
                5. Изучите рынок недвижимости
                ''',
                'category': 'mortgage',
                'is_featured': True,
                'published_date': timezone.now().date() - timedelta(days=10)
            },
            {
                'title': 'Согласие от супруга на продажу недвижимости',
                'excerpt': 'При продаже недвижимости, приобретенной в браке, часто требуется согласие супруга. Разбираемся в правовых аспектах этого вопроса.',
                'content': '''
                При продаже недвижимости, приобретенной в браке, часто требуется согласие супруга. Разбираемся в правовых аспектах этого вопроса.

                **Когда требуется согласие:**
                - Недвижимость приобретена в браке
                - Один из супругов является собственником
                - Продажа доли в общей собственности
                - Ипотечная недвижимость

                **Когда согласие не требуется:**
                - Недвижимость получена в дар или наследство
                - Приватизированная квартира
                - Добрачная собственность
                - Раздельная собственность по брачному договору

                **Форма согласия:**
                - Нотариальное удостоверение обязательно
                - Указание конкретного объекта недвижимости
                - Срок действия согласия
                - Возможность отзыва

                **Процедура получения согласия:**
                1. Подготовка документов
                2. Обращение к нотариусу
                3. Удостоверение согласия
                4. Предоставление в Росреестр

                **Последствия отсутствия согласия:**
                - Признание сделки недействительной
                - Судебные споры
                - Потеря времени и денег
                - Проблемы с регистрацией

                **Рекомендации:**
                - Всегда консультируйтесь с юристом
                - Получайте согласие заранее
                - Храните документы в безопасном месте
                - Учитывайте сроки действия согласия
                ''',
                'category': 'laws',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=15)
            },
            {
                'title': 'Как выявить потребность покупателя',
                'excerpt': 'Успешная продажа недвижимости во многом зависит от правильного выявления потребностей покупателя. Рассмотрим основные техники и подходы.',
                'content': '''
                Успешная продажа недвижимости во многом зависит от правильного выявления потребностей покупателя. Рассмотрим основные техники и подходы.

                **Подготовка к встрече:**
                1. Изучите рынок недвижимости
                2. Подготовьте вопросы
                3. Соберите информацию о клиенте
                4. Подготовьте варианты недвижимости

                **Техники выявления потребностей:**
                - Открытые вопросы
                - Уточняющие вопросы
                - Техника "воронка"
                - Активное слушание
                - Техника "5 почему"

                **Ключевые вопросы:**
                - Цель покупки недвижимости
                - Бюджет и финансирование
                - Сроки покупки
                - Предпочтения по району
                - Требования к планировке
                - Необходимость ремонта

                **Анализ ответов:**
                - Выделение приоритетов
                - Определение компромиссов
                - Выявление скрытых потребностей
                - Оценка готовности к покупке

                **Презентация предложений:**
                - Соответствие потребностям
                - Подчеркивание преимуществ
                - Работа с возражениями
                - Заключение сделки

                **Работа с возражениями:**
                - Выслушивание до конца
                - Уточнение сути возражения
                - Предоставление аргументов
                - Предложение альтернатив

                **Заключение:**
                Успешное выявление потребностей - это искусство, которое требует практики и постоянного совершенствования навыков общения.
                ''',
                'category': 'instructions',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=20)
            },
            {
                'title': 'Налоговые вычеты при покупке недвижимости',
                'excerpt': 'При покупке недвижимости можно получить налоговый вычет. Разбираемся в условиях, документах и процедуре получения.',
                'content': '''
                При покупке недвижимости можно получить налоговый вычет. Разбираемся в условиях, документах и процедуре получения.

                **Условия получения вычета:**
                - Официальное трудоустройство
                - Уплата НДФЛ
                - Покупка жилой недвижимости
                - Собственность на недвижимость

                **Размер вычета:**
                - Максимум 2 млн рублей за недвижимость
                - Максимум 3 млн рублей за ипотечные проценты
                - 13% от суммы расходов

                **Документы для вычета:**
                - Договор купли-продажи
                - Свидетельство о праве собственности
                - Платежные документы
                - Справка 2-НДФЛ
                - Декларация 3-НДФЛ

                **Способы получения:**
                1. Через работодателя
                2. Через налоговую инспекцию
                3. Через личный кабинет налогоплательщика

                **Сроки получения:**
                - Подача декларации до 30 апреля
                - Рассмотрение до 3 месяцев
                - Перечисление средств до 1 месяца

                **Частые ошибки:**
                - Неправильное оформление документов
                - Пропуск сроков подачи
                - Неучет всех расходов
                - Ошибки в расчетах

                **Рекомендации:**
                - Консультируйтесь со специалистами
                - Ведите учет всех расходов
                - Сохраняйте все документы
                - Подавайте декларацию вовремя
                ''',
                'category': 'laws',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=25)
            },
            {
                'title': 'Выбор района для покупки квартиры',
                'excerpt': 'Выбор района - один из важнейших факторов при покупке недвижимости. Рассмотрим основные критерии и их важность.',
                'content': '''
                Выбор района - один из важнейших факторов при покупке недвижимости. Рассмотрим основные критерии и их важность.

                **Транспортная доступность:**
                - Близость к метро
                - Автобусные маршруты
                - Время в пути до центра
                - Парковочные места
                - Пробки и загруженность

                **Инфраструктура:**
                - Магазины и торговые центры
                - Школы и детские сады
                - Поликлиники и больницы
                - Банки и почта
                - Спортивные объекты

                **Экология и безопасность:**
                - Загрязнение воздуха
                - Шумовое загрязнение
                - Криминальная обстановка
                - Освещенность улиц
                - Состояние дорог

                **Перспективы развития:**
                - Строительство новых объектов
                - Планы развития района
                - Инвестиции в инфраструктуру
                - Рост цен на недвижимость
                - Развитие транспорта

                **Социальная среда:**
                - Состав населения
                - Уровень доходов
                - Образовательный уровень
                - Возрастная структура
                - Культурные особенности

                **Рекомендации по выбору:**
                1. Определите приоритеты
                2. Изучите район лично
                3. Поговорите с местными жителями
                4. Изучите планы развития
                5. Учитывайте долгосрочную перспективу
                ''',
                'category': 'tips',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=30)
            },
            {
                'title': 'Ремонт квартиры: с чего начать',
                'excerpt': 'Планируете ремонт квартиры? Разбираемся в этапах, бюджете и важных моментах, которые нужно учесть перед началом работ.',
                'content': '''
                Планируете ремонт квартиры? Разбираемся в этапах, бюджете и важных моментах, которые нужно учесть перед началом работ.

                **Планирование ремонта:**
                1. Определение объема работ
                2. Составление сметы
                3. Выбор материалов
                4. Поиск подрядчиков
                5. Получение разрешений

                **Этапы ремонта:**
                - Демонтажные работы
                - Электрика и сантехника
                - Выравнивание поверхностей
                - Отделочные работы
                - Установка мебели

                **Бюджет ремонта:**
                - Материалы (40-50%)
                - Работа мастеров (30-40%)
                - Мебель и техника (10-20%)
                - Непредвиденные расходы (10%)

                **Выбор материалов:**
                - Качество vs цена
                - Экологичность
                - Долговечность
                - Простота ухода
                - Соответствие стилю

                **Поиск подрядчиков:**
                - Рекомендации знакомых
                - Отзывы в интернете
                - Проверка документов
                - Договор и гарантии
                - Контроль качества

                **Частые ошибки:**
                - Недооценка бюджета
                - Неправильная последовательность работ
                - Экономия на материалах
                - Отсутствие контроля
                - Неправильные замеры

                **Рекомендации:**
                - Планируйте заранее
                - Изучите рынок материалов
                - Наймите прораба
                - Ведите фотоотчет
                - Не торопитесь с выбором
                ''',
                'category': 'instructions',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=35)
            },
            {
                'title': 'Инвестиции в недвижимость: плюсы и минусы',
                'excerpt': 'Инвестиции в недвижимость считаются одним из самых надежных способов вложения денег. Рассмотрим все преимущества и недостатки.',
                'content': '''
                Инвестиции в недвижимость считаются одним из самых надежных способов вложения денег. Рассмотрим все преимущества и недостатки.

                **Преимущества инвестиций в недвижимость:**
                - Стабильный рост стоимости
                - Регулярный доход от аренды
                - Защита от инфляции
                - Возможность использования
                - Налоговые льготы

                **Недостатки:**
                - Высокая стоимость входа
                - Низкая ликвидность
                - Расходы на содержание
                - Риски изменения законодательства
                - Зависимость от рынка

                **Виды инвестиций:**
                1. Покупка для сдачи в аренду
                2. Покупка для перепродажи
                3. Инвестиции в строящуюся недвижимость
                4. Покупка коммерческой недвижимости
                5. Инвестиции в зарубежную недвижимость

                **Факторы риска:**
                - Экономические кризисы
                - Изменение ставок по кредитам
                - Демографические изменения
                - Технологические изменения
                - Политические риски

                **Стратегии инвестирования:**
                - Долгосрочные инвестиции
                - Краткосрочные спекуляции
                - Диверсификация портфеля
                - Инвестиции в разные типы недвижимости
                - Географическая диверсификация

                **Рекомендации:**
                - Изучите рынок недвижимости
                - Рассчитайте все расходы
                - Учитывайте налоги
                - Планируйте на долгосрочную перспективу
                - Консультируйтесь со специалистами
                ''',
                'category': 'market',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=40)
            },
            {
                'title': 'Проверка документов на недвижимость',
                'excerpt': 'Перед покупкой недвижимости необходимо тщательно проверить все документы. Рассмотрим основные моменты и красные флаги.',
                'content': '''
                Перед покупкой недвижимости необходимо тщательно проверить все документы. Рассмотрим основные моменты и красные флаги.

                **Основные документы:**
                - Свидетельство о праве собственности
                - Договор основания
                - Кадастровый паспорт
                - Технический паспорт
                - Выписка из ЕГРН

                **Проверка собственника:**
                - Паспортные данные
                - Гражданство
                - Дееспособность
                - Отсутствие ограничений
                - Согласие супруга

                **Проверка объекта:**
                - Соответствие кадастровым данным
                - Отсутствие обременений
                - Состояние коммуникаций
                - Планировка и перепланировка
                - Соответствие назначению

                **Красные флаги:**
                - Отсутствие документов
                - Несоответствие данных
                - Обременения и аресты
                - Судебные споры
                - Подозрительно низкая цена

                **Проверка через интернет:**
                - Сайт Росреестра
                - База исполнительных производств
                - Реестр банкротств
                - База данных судов
                - Специализированные сервисы

                **Консультация специалистов:**
                - Юрист по недвижимости
                - Кадастровый инженер
                - Оценщик
                - Риелтор
                - Нотариус

                **Рекомендации:**
                - Не экономьте на проверке
                - Используйте несколько источников
                - Сохраняйте все документы
                - Обращайтесь к специалистам
                - Не торопитесь с решением
                ''',
                'category': 'instructions',
                'is_featured': False,
                'published_date': timezone.now().date() - timedelta(days=45)
            }
        ]

        created_count = 0
        for article_data in articles_data:
            # Проверяем, существует ли уже статья с таким заголовком
            if not Article.objects.filter(title=article_data['title']).exists():
                article = Article.objects.create(
                    title=article_data['title'],
                    excerpt=article_data['excerpt'],
                    content=article_data['content'],
                    category=article_data['category'],
                    is_featured=article_data['is_featured'],
                    published_date=article_data['published_date']
                )
                created_count += 1
                self.stdout.write(
                    self.style.SUCCESS(f'Создана статья: {article.title}')
                )
            else:
                self.stdout.write(
                    self.style.WARNING(f'Статья уже существует: {article_data["title"]}')
                )

        self.stdout.write(
            self.style.SUCCESS(f'Успешно создано {created_count} статей')
        ) 