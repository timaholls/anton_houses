{% extends 'base.html' %}

{% block title %}Антон Хаус - Главная{% endblock %}

{% block content %}
<div class="container">
    <section class="hero-section">
        <h1 class="hero-title">Добро пожаловать в Антон Хаус</h1>
        <p class="hero-subtitle">Найдите свой идеальный дом в лучших жилых комплексах</p>
    </section>

    <section class="catalog-section">
        <div class="catalog-header">
            <h2 class="section-title">Популярные жилые комплексы</h2>
            <p class="section-subtitle">9 лучших предложений для вас</p>
        </div>

        <div class="home-grid">
            {% for complex in complexes %}
            <div class="home-property-card" data-city="{{ complex.city }}" data-district="{{ complex.district }}" onclick="window.location.href='{% url 'main:detail' complex.id %}'" style="cursor: pointer;">
                <div class="home-card-image">
                    {% if complex.image %}
                        <img src="{{ complex.image.url }}" alt="{{ complex.name }}">
                    {% else %}
                        <img src="https://via.placeholder.com/400x300/4A90E2/FFFFFF?text={{ complex.name|urlencode }}" alt="{{ complex.name }}">
                    {% endif %}
                    

                </div>
                
                <div class="home-card-content">
                    <div class="home-card-header">
                        <h3 class="home-card-title">{{ complex.name }}</h3>
                        <div class="home-card-location">
                            <span class="home-location-text">{{ complex.district|default:complex.city }}</span>
                            <span class="home-commute-time">{{ complex.commute_time }}</span>
                        </div>
                    </div>
                    
                    <div class="home-card-price">
                        <span class="home-price-text">от {{ complex.price_from|floatformat:1 }} млн ₽</span>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="no-complexes">
                <p>Жилые комплексы пока не добавлены</p>
            </div>
            {% endfor %}
        </div>

        <div class="catalog-footer">
            <a href="{% url 'main:catalog' %}" class="btn btn-primary btn-large">
                Перейти в каталог ЖК
                <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </section>

    <!-- Блок "О компании" -->
    {% if company_info %}
    <section class="about-section">
        <div class="about-header">
            <span class="about-tab">О компании</span>
            <h2 class="about-title">Мы специализируемся на продаже квартир в лучших жилых комплексах</h2>
        </div>
        
        <div class="about-content">
            <div class="about-image">
                {% if company_info.founder_photo %}
                    <img src="{{ company_info.founder_photo.url }}" alt="{{ company_info.founder_name }}">
                {% else %}
                    <img src="https://via.placeholder.com/300x400/4A90E2/FFFFFF?text={{ company_info.founder_name|urlencode }}" alt="{{ company_info.founder_name }}">
                {% endif %}
            </div>
            
            <div class="about-text">
                <blockquote class="about-quote">
                    «{{ company_info.quote }}»
                </blockquote>
                
                <div class="about-signature">
                    <div class="signature-line">{{ company_info.founder_name }}</div>
                    <div class="founder-info">
                        <span class="founder-title">{{ company_info.founder_position }}</span>
                        <span class="company-name">{{ company_info.company_name }}</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endif %}

    {% include 'includes/feedback_form.html' %}
</div>

<script>
// Обработка кликов по карточкам ЖК теперь происходит через onclick в HTML

// Эффект тени для sticky шапки при прокрутке
window.addEventListener('scroll', function() {
    const header = document.querySelector('.main-header');
    if (window.scrollY > 10) {
        header.style.boxShadow = '0 4px 12px rgba(0, 0, 0, 0.15)';
    } else {
        header.style.boxShadow = '0 1px 3px rgba(0, 0, 0, 0.05)';
    }
});
</script>
{% endblock %} 